function storeMap(o,e){function t(o,t,a){var n=[],r=[],s=[];""==a?(n=[14,14],r=[7,7],s=[7,7]):"larger"==a?(n=[14*o,14*o],r=[14*o*.5,14*o*.5],s=[14*o*.5,14*o*.5]):"smaller"==a&&(n=[14/o,14/o],r=[14/o*.5,14/o*.5],s=[14/o*.5,14/o*.5]);for(var p=0;p<e.length;p++)l[p].setIcon(new i({iconSize:n,iconAnchor:[0,0],popupAnchor:r,tooltipAnchor:s,html:e[p].markerHtml}));$(".store_mark").find(".store_name").css("font-size",t)}var a=L.map("storeMap",{zoomControl:!1,fullscreenControl:!0,minZoom:1,maxZoom:3,continuousWorld:!1,noWrap:!0,crs:L.CRS.Simple,attributionControl:!1,scrollWheelZoom:!1});L.control.zoom({position:"topright"}).addTo(a);var n=new L.LatLngBounds(a.unproject([0,2500],a.getMaxZoom()),a.unproject([5200,0],a.getMaxZoom())),r=[a.unproject([0,950],a.getMaxZoom()).lat,a.unproject([2600,0],a.getMaxZoom()).lng];a.setMaxBounds(n),a.setView(r,2),L.control.attribution({prefix:!1}).addAttribution("Design by Weypro.").addTo(a);for(var s=L.imageOverlay(o.daymode,n).addTo(a),p=L.imageOverlay(o.nightmode,n),l=[],i=L.DivIcon.extend({options:{iconSize:[14,14],iconAnchor:[0,0],popupAnchor:[7,7],tooltipAnchor:[7,7],className:"store_mark"}}),m=0;m<e.length;m++){var c=[a.unproject([0,e[m].latlng[0]],a.getMaxZoom()).lat,a.unproject([e[m].latlng[1],0],a.getMaxZoom()).lng],u=L.responsivePopup().setContent(e[m].popupHtml),d=new L.marker(c,{storeId:e[m].storeId,icon:new i({html:e[m].markerHtml})}).bindTooltip(e[m].storeName).bindPopup(u,{maxWidth:"auto"}).addTo(a).on("popupopen",function(o){$("#mapSky").addClass("popupActive"),$(o.target._icon).addClass("isPopup"),$(".map_popup_inner").mCustomScrollbar({theme:"dark-3",axis:"y"})}).on("popupclose",function(o){$("#mapSky").removeClass("popupActive"),$(o.target._icon).removeClass("isPopup")});l.push(d)}$("#mapControls").on("click",".zoomOut",function(o){a.setZoom(a.getZoom()-1)}),$("#mapControls").on("click",".zoomIn",function(o){a.setZoom(a.getZoom()+1)}),a.on("zoomend",function(o){var e,n,r=a.getZoom();2==r?(e=1,n="0.75rem",t(e,n,"")):r>2?(e=Math.pow(2,r-2),n=.75*e+"rem",t(e,n,"larger")):r<2&&(e=Math.pow(2,2-r),n=.75/e+"rem",t(e,n,"smaller"))});var h;$("#storeMap").on("mousewheel DOMMouseScroll",function(o){o.stopPropagation(),1==o.ctrlKey?(o.preventDefault(),a.scrollWheelZoom.enable(),$("#storeMap").removeClass("map_scroll"),setTimeout(function(){a.scrollWheelZoom.disable()},1e3)):(a.scrollWheelZoom.disable(),$("#storeMap").addClass("map_scroll"),clearTimeout(h),h=setTimeout(function(){$("#storeMap").removeClass("map_scroll")},600))}),$(window).on("mousewheel DOMMouseScroll",function(o){$("#storeMap").removeClass("map_scroll")}),$("#mapMode").on("change",'input:radio[name="mapMode"]',function(o){$('input:radio[name="mapMode"]:checked').hasClass("switch_off")?(a.removeLayer(p),a.addLayer(s),$(".store_map_wrapper").removeClass("night_mode")):$('input:radio[name="mapMode"]:checked').hasClass("switch_on")&&(a.removeLayer(s),a.addLayer(p),$(".store_map_wrapper").addClass("night_mode"))}),$("#streetAside .street_list").on("click",".store_name",function(o){var e=$(this).attr("data-storeid");a.eachLayer(function(o){o.options&&"markerPane"===o.options.pane&&o.options.storeId===e&&(o.openPopup(),a.panTo(o._latlng))})}),$(window).on("resize",function(o){a.closePopup()})}