function storeMap(o,e){function t(o,t,n){var a=[],r=[],s=[];""==n?(a=[14,14],r=[7,7],s=[7,7]):"larger"==n?(a=[14*o,14*o],r=[14*o*.5,14*o*.5],s=[14*o*.5,14*o*.5]):"smaller"==n&&(a=[14/o,14/o],r=[14/o*.5,14/o*.5],s=[14/o*.5,14/o*.5]);for(var p=0;p<e.length;p++)l[p].setIcon(new i({iconSize:a,iconAnchor:[0,0],popupAnchor:r,tooltipAnchor:s,html:e[p].markerHtml}));$(".store_mark").find(".store_name").css("font-size",t)}var n=L.map("storeMap",{zoomControl:!1,fullscreenControl:!0,minZoom:1,maxZoom:3,continuousWorld:!1,noWrap:!0,crs:L.CRS.Simple,attributionControl:!1,scrollWheelZoom:!1});L.control.zoom({position:"topright"}).addTo(n);var a=new L.LatLngBounds(n.unproject([0,2500],n.getMaxZoom()),n.unproject([5200,0],n.getMaxZoom())),r=[n.unproject([0,950],n.getMaxZoom()).lat,n.unproject([2600,0],n.getMaxZoom()).lng];n.setMaxBounds(a),n.setView(r,2),L.control.attribution({prefix:!1}).addAttribution("Design by Weypro.").addTo(n);for(var s=L.imageOverlay(o.daymode,a).addTo(n),p=L.imageOverlay(o.nightmode,a),l=[],i=L.DivIcon.extend({options:{iconSize:[14,14],iconAnchor:[0,0],popupAnchor:[7,7],tooltipAnchor:[7,7],className:"store_mark"}}),m=0;m<e.length;m++){var c=[n.unproject([0,e[m].latlng[0]],n.getMaxZoom()).lat,n.unproject([e[m].latlng[1],0],n.getMaxZoom()).lng],d=L.responsivePopup().setContent(e[m].popupHtml),u=new L.marker(c,{storeId:e[m].storeId,icon:new i({html:e[m].markerHtml})}).bindTooltip(e[m].storeName).bindPopup(d,{maxWidth:"auto"}).addTo(n).on("popupopen",function(o){$("#mapSky").addClass("popupActive"),$(o.target._icon).addClass("isPopup"),$(".map_popup_inner").mCustomScrollbar({theme:"dark-3",axis:"y"})}).on("popupclose",function(o){$("#mapSky").removeClass("popupActive"),$(o.target._icon).removeClass("isPopup")});l.push(u)}$("#mapControls").on("click",".zoomOut",function(o){n.setZoom(n.getZoom()-1)}),$("#mapControls").on("click",".zoomIn",function(o){n.setZoom(n.getZoom()+1)}),n.on("zoomend",function(o){var e,a,r=n.getZoom();2==r?(e=1,a="0.75rem",t(e,a,"")):r>2?(e=Math.pow(2,r-2),a=.75*e+"rem",t(e,a,"larger")):r<2&&(e=Math.pow(2,2-r),a=.75/e+"rem",t(e,a,"smaller"))});var h;$("#storeMap").on("mousewheel DOMMouseScroll",function(o){o.stopPropagation(),1==o.ctrlKey?(o.preventDefault(),n.scrollWheelZoom.enable(),$("#storeMap").removeClass("map_scroll"),setTimeout(function(){n.scrollWheelZoom.disable()},1e3)):(n.scrollWheelZoom.disable(),$("#storeMap").addClass("map_scroll"),clearTimeout(h),h=setTimeout(function(){$("#storeMap").removeClass("map_scroll")},600))}),$(window).on("mousewheel DOMMouseScroll",function(o){$("#storeMap").removeClass("map_scroll")}),$("#mapMode").on("change",'input:radio[name="mapMode"]',function(o){$('input:radio[name="mapMode"]:checked').hasClass("switch_off")?(n.removeLayer(p),n.addLayer(s),$(".store_map_wrapper").removeClass("night_mode")):$('input:radio[name="mapMode"]:checked').hasClass("switch_on")&&(n.removeLayer(s),n.addLayer(p),$(".store_map_wrapper").addClass("night_mode"))}),$("#streetAside .street_list").on("click",".store_name",function(o){var e=$(this).attr("data-storeid");$(window).width()<768&&$("#streetAside").removeClass("isOpen"),n.eachLayer(function(o){o.options&&"markerPane"===o.options.pane&&o.options.storeId===e&&(o.openPopup(),n.panTo(o._latlng))})}),$(window).on("resize",function(o){n.closePopup()})}